<!doctype html>
<html lang="en" style="height: 100%; margin: 0;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0">
    <title>EE Test Game</title>
    <script src="../build/latest.js"></script>
</head>
<body style="height: 100%; margin: 0">
</body>
</html>

<script defer>
    const { input, Entity, Scene, rgb, v3 } = ee;
    const { run } = ee.EntropyEngine();

	const main = Scene.create({
        settings: {
            backgroundTint: rgb(200),
            globalGravity: new v3(0, -1)
        }
    });

	main.entities.push(Entity.new({
        components: [
			new ee.Camera
        ]
    }));

	function block (scale, position) {
        main.entities.push(Entity.new({
            components: [
                new ee.RectRenderer,
                new ee.RectCollider,
                new ee.Body
            ],
            transform: new ee.Transform({ position, scale })
        }));
    }

    main.entities.push(Entity.new({
        components: [
            new ee.CircleRenderer,
            new ee.CircleCollider,
            new ee.Body,
            new ee.Script({ script: {
                Update: (self) => {
                    self.transform.position.set(input.cursorPosWorldSpace);
                }}
            })
        ],
        transform: new ee.Transform({
            scale: new v3(50)
        })
    }));

    for (let i = 0; i < 10; i++) {
        block(
            new v3(Math.random() * 60 + 40, Math.random() * 60 + 40),
            new v3((Math.random()-0.5) * 500, (Math.random()-0.5) * 500)
        );
    }


    main.entities.push(Entity.new({
        Static: true,
        components: [
            new ee.RectRenderer,
            new ee.RectCollider,
            new ee.Body
        ],
        transform: new ee.Transform({
            position: new v3(0, -300),
            scale: new v3(1000, 50)
        })
    }));


	run();
</script>